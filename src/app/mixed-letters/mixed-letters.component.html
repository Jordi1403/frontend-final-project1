<div class="mixed-letters-container">
  <!-- Loading Progress Bar -->
  <div *ngIf="loading">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <p>Loading game data, please wait...</p>
  </div>

  <!-- If the category exists and loading is complete -->
  <div *ngIf="!loading && currentCategory && !insufficientWords; else noCategory">
    <!-- Exit Button -->
    <app-exit-button class="exit-button"></app-exit-button>


    <!-- Score Display -->
    <div class="score-display">
      <mat-icon>paid</mat-icon>
      <span>Score: {{ score }}</span>
    </div>

    <h1>Mixed Letters Game</h1>

    <h2>{{ currentCategory.name }}</h2>

    <div class="word-section">
      <h3>Unscramble the word:</h3>
      <p class="scrambled-word">{{ scrambledWord }}</p>

      <p>
        <strong>Translate:</strong>
        {{ currentCategory.words[currentWordIndex].target }}
      </p>

      <!-- Display error message if present -->
      <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>

      <!-- Input field for the user's answer -->
      <input 
        [(ngModel)]="userAnswer" 
        placeholder="Enter your answer" 
        class="answer-input"
      />

      <!-- Submit and Reset Buttons -->
      <div class="action-buttons">
        <button 
          mat-raised-button 
          color="primary" 
          (click)="submitAnswer()"
          [disabled]="!userAnswer.trim()"
        >
          Submit
        </button>

        <button 
          mat-raised-button 
          color="warn" 
          (click)="resetInput()"
        >
          Reset
        </button>
      </div>
    </div>

    <!-- Progress Bar for Game Rounds -->
    <mat-progress-bar 
      mode="determinate" 
      [value]="(currentWordIndex / totalQuestions) * 100"
    ></mat-progress-bar>

    <!-- Display number of words answered and total words -->
    <div class="word-progress-info">
      <p>{{ currentWordIndex }} of {{ totalQuestions }} words answered</p>
    </div>
  </div>

  <!-- If no category or insufficient words -->
  <ng-template #noCategory>
    <div class="no-category">
      <p>This category does not have enough words. Please add more words or choose a different category.</p>
    <app-exit-button class="exit-button"></app-exit-button>
    </div>
  </ng-template>
</div>
